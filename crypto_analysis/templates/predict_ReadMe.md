# templates/predict.html — صفحة التنبؤ بالأسعار

- الهدف: تمكين المستخدم من اختيار الرمز، المدة، العملة، ونوع النموذج؛ ثم عرض مخطط التنبؤ ومعلومات مساعدة.

## المتغيرات القادمة من routes
- `crypto_data`: قاموس الرموز → الاسم والبيانات التاريخية.
- `prediction_data` (اختياري عند POST ناجح):
  - `symbol`, `name`, `days`, `currency`, `model_type`, `model_name`
  - `predictions`: قائمة سجلات (date, predicted_price)
  - `purchase_info` (اختياري): حسابات مبنية على مبلغ إدخالي (وحدات، أقرب تاريخ لسعر محدد، ...)
- `chart_json` (اختياري): JSON لمخطط Plotly يضم البيانات التاريخية الأخيرة + خط التنبؤ + نطاق ثقة بسيط.
- `model_types`: خريطة رمز → اسم معروض للنماذج المدعومة.
- `fiat_currencies`: قائمة/قاموس عملات ورقية من `CurrencyConverter`.

## ملاحظات مهمة
- عند فشل نموذج التجميع (Ensemble) يحاول المسار تلقائيًا النماذج الفردية (linear, rf, svr) بالتسلسل.
- تحويل العملة يطبّق على كل من السلاسل التاريخية والتنبؤات باستخدام `exchange_rates`.
- المخطط يستخدم `plotly_white` لضمان الوضوح.
